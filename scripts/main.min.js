"use strict";class DecktumWebsite{constructor(){this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{this.setupComponents()}):this.setupComponents()}setupComponents(){try{this.setupMobileMenu(),this.setupVideoControls(),this.setupSmoothScrolling(),this.setupHeaderBehavior(),this.setupScrollToTop(),this.setupKeyboardNavigation(),this.setupFormEnhancements(),this.setupPerformanceMonitoring(),console.log("Decktum Deutschland website initialized successfully")}catch(e){console.error("Error initializing website:",e)}}setupMobileMenu(){const e=document.querySelector(".mobile-menu-toggle"),t=document.querySelector(".mobile-navigation"),o=document.querySelectorAll(".mobile-menu a");e&&t&&(e.addEventListener("click",o=>{o.preventDefault(),this.toggleMobileMenu(e,t)}),o.forEach(o=>{o.addEventListener("click",()=>{this.closeMobileMenu(e,t)})}),document.addEventListener("keydown",o=>{"Escape"!==o.key||t.hidden||this.closeMobileMenu(e,t)}),document.addEventListener("click",o=>{e.contains(o.target)||t.contains(o.target)||t.hidden||this.closeMobileMenu(e,t)}))}toggleMobileMenu(e,t){!t.hidden?this.closeMobileMenu(e,t):this.openMobileMenu(e,t)}openMobileMenu(e,t){t.hidden=!1,t.classList.add("open"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-label","Menü schließen"),this.trapFocus(t),document.body.classList.add("no-scroll"),this.announceToScreenReader("Menü geöffnet")}closeMobileMenu(e,t){t.classList.remove("open"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","Menü öffnen"),document.body.classList.remove("no-scroll"),this.removeFocusTrap(),setTimeout(()=>{t.hidden=!0},300),this.announceToScreenReader("Menü geschlossen")}setupVideoControls(){const e=document.querySelector(".video-control-btn"),t=document.querySelector("#hero-video-desktop"),o=document.querySelector("#hero-video-mobile");if(!e)return;const r=()=>window.innerWidth>=768?t:o;let n;e.addEventListener("click",t=>{t.preventDefault();const o=r();o&&this.toggleVideoPlayback(o,e)}),[t,o].forEach(t=>{t&&(t.addEventListener("play",()=>{e.classList.add("playing"),e.setAttribute("aria-label","Video pausieren")}),t.addEventListener("pause",()=>{e.classList.remove("playing"),e.setAttribute("aria-label","Video abspielen")}),t.addEventListener("play",()=>{setTimeout(()=>{t.paused||(e.style.opacity="0")},3e3)}),t.addEventListener("pause",()=>{e.style.opacity="0.8"}))}),document.addEventListener("mousemove",()=>{e.style.opacity="0.8",clearTimeout(n);const t=r();t&&!t.paused&&(n=setTimeout(()=>{e.style.opacity="0"},3e3))})}toggleVideoPlayback(e){try{e.paused?(e.play(),this.announceToScreenReader("Video wird abgespielt")):(e.pause(),this.announceToScreenReader("Video pausiert"))}catch(e){console.error("Error controlling video playback:",e)}}setupSmoothScrolling(){document.documentElement.style.scrollBehavior="smooth";document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("href"),r=document.querySelector(o);r&&"#"!==o&&(t.preventDefault(),this.smoothScrollTo(r))})})}smoothScrollTo(e,t=100){const o=e.offsetTop-t;window.scrollTo({top:o,behavior:"smooth"}),setTimeout(()=>{e.focus({preventScroll:!0})},500)}setupHeaderBehavior(){const e=document.querySelector(".site-header");if(!e)return;let t=window.scrollY,o=!1;const r=()=>{const r=window.scrollY;r>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),e.style.transform=r>t&&r>100?"translateY(-100%)":"translateY(0)",t=r,o=!1};window.addEventListener("scroll",()=>{o||(requestAnimationFrame(r),o=!0)},{passive:!0})}setupScrollToTop(){const e=this.createScrollToTopButton();document.body.appendChild(e);let t=!1;const o=()=>{window.scrollY>300?e.classList.add("visible"):e.classList.remove("visible"),t=!1};window.addEventListener("scroll",()=>{t||(requestAnimationFrame(o),t=!0)},{passive:!0}),e.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})}createScrollToTopButton(){const e=document.createElement("button");return e.className="scroll-to-top",e.setAttribute("aria-label","Nach oben scrollen"),e.innerHTML='\n      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <path d="m18 15-6-6-6 6"/>\n      </svg>\n    ',Object.assign(e.style,{position:"fixed",bottom:"2rem",right:"2rem",width:"3rem",height:"3rem",backgroundColor:"var(--color-primary)",color:"var(--color-background)",border:"none",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"var(--shadow-lg)",opacity:"0",visibility:"hidden",transform:"translateY(20px)",transition:"all 0.3s ease",zIndex:"var(--z-docked)"}),e}setupKeyboardNavigation(){const e=document.querySelector(".skip-link");e&&e.addEventListener("click",t=>{t.preventDefault();const o=document.querySelector(e.getAttribute("href"));o&&(o.focus(),o.scrollIntoView({behavior:"smooth"}))}),document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")}),this.setupArrowKeyNavigation()}setupArrowKeyNavigation(){document.querySelectorAll(".nav-menu, .mobile-menu").forEach(e=>{const t=e.querySelectorAll("a");e.addEventListener("keydown",e=>{const o=Array.from(t).indexOf(document.activeElement);switch(e.key){case"ArrowDown":{e.preventDefault();const r=(o+1)%t.length;t[r].focus();break}case"ArrowUp":{e.preventDefault();const r=o>0?o-1:t.length-1;t[r].focus();break}}})})}setupFormEnhancements(){document.querySelectorAll("form").forEach(e=>{this.setupFormValidation(e),this.enhanceFormAccessibility(e)})}setupFormValidation(e){e.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("blur",()=>{this.validateField(e)}),e.addEventListener("input",()=>{this.clearFieldError(e)})}),e.addEventListener("submit",t=>{this.validateForm(e)||t.preventDefault()})}validateField(e){const t=e.value.trim(),o=e.type;let r=!0,n="";return e.hasAttribute("required")&&!t?(r=!1,n="Dieses Feld ist erforderlich"):"email"===o&&t&&!this.isValidEmail(t)?(r=!1,n="Bitte geben Sie eine gültige E-Mail-Adresse ein"):"tel"===o&&t&&!this.isValidPhone(t)&&(r=!1,n="Bitte geben Sie eine gültige Telefonnummer ein"),r?this.clearFieldError(e):this.showFieldError(e,n),r}validateForm(e){const t=e.querySelectorAll("input[required], textarea[required]");let o=!0;return t.forEach(e=>{this.validateField(e)||(o=!1)}),o}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhone(e){return/^(\+49|0)[1-9]\d{8,11}$/.test(e.replace(/\s/g,""))}showFieldError(e,t){this.clearFieldError(e),e.setAttribute("aria-invalid","true"),e.classList.add("error");const o=document.createElement("div");o.className="field-error",o.textContent=t,o.setAttribute("role","alert"),e.parentNode.appendChild(o)}clearFieldError(e){e.setAttribute("aria-invalid","false"),e.classList.remove("error");const t=e.parentNode.querySelector(".field-error");t&&t.remove()}enhanceFormAccessibility(e){e.querySelectorAll("input, textarea, select").forEach(t=>{if(!t.getAttribute("aria-label")&&!t.getAttribute("aria-labelledby")){const o=e.querySelector(`label[for="${t.id}"]`);o&&t.setAttribute("aria-labelledby",o.id||`${t.id}-label`)}})}trapFocus(e){const t=e.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select'),o=t[0],r=t[t.length-1];o&&o.focus(),this.focusTrapHandler=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===o&&(r.focus(),e.preventDefault()):document.activeElement===r&&(o.focus(),e.preventDefault()))},document.addEventListener("keydown",this.focusTrapHandler)}removeFocusTrap(){this.focusTrapHandler&&(document.removeEventListener("keydown",this.focusTrapHandler),this.focusTrapHandler=null)}announceToScreenReader(e){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)}setupPerformanceMonitoring(){if("performance"in window&&(window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0],t=e.loadEventEnd-e.loadEventStart;t>0&&console.log(`Page load time: ${t}ms`)},0)}),"PerformanceObserver"in window))try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.duration>50&&console.warn(`Long task detected: ${e.duration}ms`)})}).observe({entryTypes:["longtask"]})}catch(e){}}debounce(e,t){let o;return function(...r){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),e(...r)},t)}}throttle(e,t){let o;return function(...r){o||(e.apply(this,r),o=!0,setTimeout(()=>o=!1,t))}}}new DecktumWebsite;const style=document.createElement("style");style.textContent="\n  .scroll-to-top.visible {\n    opacity: 1 !important;\n    visibility: visible !important;\n    transform: translateY(0) !important;\n  }\n  \n  .scroll-to-top:hover {\n    background-color: var(--color-primary-dark) !important;\n    transform: translateY(-2px) !important;\n  }\n  \n  .field-error {\n    color: var(--color-error);\n    font-size: var(--font-size-sm);\n    margin-top: var(--space-xs);\n  }\n  \n  .error {\n    border-color: var(--color-error) !important;\n    background-color: rgba(220, 53, 69, 0.1) !important;\n  }\n  \n  .keyboard-navigation *:focus {\n    outline: 2px solid var(--color-primary) !important;\n    outline-offset: 2px !important;\n  }\n",document.head.appendChild(style),"undefined"==typeof window&&"undefined"!=typeof module&&module.exports&&(module.exports=DecktumWebsite);
